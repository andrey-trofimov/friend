(()=>{"use strict";var e={d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(){document.querySelector("main").className="";let e=document.querySelector(".vert-container");e.className="registration-page",e.innerHTML='\n\n          <h1 class="title title_registration-page">Укажи личные данные</h1>\n\n          <form>\n            <h2 class="subtitle">Придумай пароль</h2>\n\n            <label for="password" class="label">Пароль <span class="error">*</span></label>\n            <input type="password" class="input" id="password" name="password" required />\n            <p class="note" id="password-note">\n              Пароль должен состоять из 8ми символов и включать заглавную букву,\n              специальный символ и цифру\n            </p>\n\n            <label for="password-confirm" class="label">Повтори пароль <span class="error">*</span></label>\n            <input type="password" class="input" id="password-confirm" name="password-confirm" required />\n            <p class="note" id="password-confirm-note"></p>\n\n            <h2 class="subtitle">Расскажи о себе</h2>\n\n            <label for="name" class="label">Имя или псевдоним <span class="error">*</span></label>\n            <input type="text" class="input" id="name" name="name" required />\n            <p class="note" id="name-note">\n              Будет доступен только твоему психологу и личному помощнику\n            </p>\n\n            <label for="birth" class="label">Дата рождения <span class="error">*</span></label>\n            <span class="date-picker">\n              <input type="text" class="input" id="birth" name="birth" required placeholder="__ __ .__ __.__ __ __ __" /></span>\n            <p class="note" id="birth-note">\n              Для получения услуг тебе должно быть 18 или больше лет\n            </p>\n\n            <h2 class="subtitle">Укажи по желанию</h2>\n\n            <label for="email" class="label">E-mail</label>\n            <input type="email" class="input" id="email" name="email" />\n            <p class="note" id="email-note">\n              Присылаем только информацию, связанную с твоими сессиями\n            </p>\n\n            <label for="tg" class="label">Ник в Телеграм</label>\n            <input type="text" class="input" id="tg" name="tg" placeholder="@" />\n            <p class="note" id="tg-note">\n              Присылаем только информацию, связанную с твоими сессиями\n            </p>\n\n            <input type="button" class="button button_registration-page button_block" id="submit" value="Далее" />\n            \n          </form>\n          \n'}function n(){let e=document.querySelector("#password-note"),t=m.pw,n=m.pwConfirm;""==t.value&&""==n.value&&(e.innerHTML="Пароль должен состоять из 8ми символов и включать заглавную букву, специальный символ и цифру",e.className="note",t.className="input",n.className="input",d.password=!1,v.password=""),t.value!=n.value&&(e.innerHTML="Пароли не совпадают",e.className="note note_error",t.className="input input_error",n.className="input input_error",d.password=!1,v.password=""),""!=t.value&&""!=n.value&&t.value==n.value&&(e.innerHTML="",e.className="note",t.className="input input_valid",n.className="input input_valid",d.password=!0,v.password=t.value)}function a(){let e=m.userName,t=document.querySelector("#name-note"),n=/[\p{sc=Cyrillic}\d]/giu;e.value=e.value.replace(/[a-z"!#\$%&'\*\+-/=\?\^_`{\|}~@\.\:\;]/gi,""),n.test(e.value)&&(e.value=e.value.match(n).join("")),e.value.length>20&&(e.className="input input_error",t.className="note note_error",t.innerHTML=`Превышено допустимое количество символов: сократите ${e.value.length-20} символов`,d.userName=!1,v.name=""),""==e.value&&(e.className="input",t.className="note",t.innerHTML="Будет доступен только твоему психологу и личному помощнику",d.userName=!1,v.name=""),e.value.length<21&&e.value.length>0&&(e.className="input input_valid",t.className="note",t.innerHTML="Будет доступен только твоему психологу и личному помощнику",d.userName=!0,v.name=e.value)}function l(){let e=document.querySelector("#birth-note"),t=Date.now(),n=m.birth,a=[/[0-3]/,/[0-9]/,/\./,/[0-1]/,/[0-9]/,/\./,/[1-2]/,/[0-9]/,/[0-9]/,/[0-9]/],l=[],s=0;if(n.value.length>0&&"3"==n.value[0]&&(a[1]=/[0-1]/),n.value.length>3&&"1"==n.value[3]&&(a[4]=/[0-2]/),n.value.length>7&&"1"==n.value[7]&&(a[8]=/9/),n.value.length>7&&"2"==n.value[7]&&(a[8]=/0/),n.value.length>1&&"."!=n.value[2]&&(l=n.value.split(""),l.splice(2,0,"."),n.value=l.join("")),n.value.length>4&&"."!=n.value[5]&&(l=n.value.split(""),l.splice(5,0,"."),n.value=l.join("")),n.value.length>0){let e=n.value.length<10?n.value.length:10;for(let t=0;t<e;t++)l[t]=1==a[t].test(n.value[t])?n.value[t]:"";n.value=l.join("")}if(l.length>9){let e=n.value.slice(6,10),a=n.value.slice(3,5),l=n.value.slice(0,2);s=(t-Date.parse(e+"-"+a+"-"+l))/315576e5,v.birth=`${e}-${a}-${l}`}s<18.002737&&(n.className="input input_error",e.className="note note_error",e.innerHTML="Для получения услуг тебе должно быть 18 или больше лет. Необходимо согласие родителей.",d.birth=!1),s>=18.002737&&s<100&&(n.className="input input_valid",e.className="note",e.innerHTML="",d.birth=!0),s>=100&&(n.className="input input_error",e.className="note note_error",e.innerHTML=`Вам точно ${s-s%1}?`,d.birth=!1),""==n.value&&(n.className="input",e.className="note",e.innerHTML="Для получения услуг тебе должно быть 18 или больше лет. Необходимо согласие родителей.",d.birth=!1)}function s(){let e=document.querySelector("#email-note"),t=m.email;0==t.value.length?(t.className="input",e.innerHTML="Присылаем только информацию, связанную с твоими сессиями",e.className="note",d.email=!0,v.email=""):/@/g.test(t.value)?(t.className="input input_valid",e.innerHTML="Присылаем только информацию, связанную с твоими сессиями",e.className="note",d.email=!0,v.email=t.value):(t.className="input input_error",e.innerHTML="Пропущен символ @",e.className="note note_error",d.email=!1,v.email="")}function r(){let e=document.querySelector("#email-note"),t=m.email,n=/[a-z0-9!#\$%&'\*\+-/=\?\^_`{\|}~@\.]/gi,a=/[\p{sc=Cyrillic}\s]/giu;a.test(t.value)&&(e.innerHTML="Допустимы латинские символы, цифры и спец. символы.",e.className="note note_error",t.className="input input_error",t.value=t.value.replace(a,"")),n.test(t.value)&&(t.value=t.value.match(n).join(""),e.innerHTML="Присылаем только информацию, связанную с твоими сессиями",e.className="note",t.className="input")}function i(){let e=document.querySelector("#tg-note"),t=m.tg;t.value=t.value.replace(/\W/gi,""),t.value="@"+t.value,"@"==t.value&&(t.value="",t.className="input",e.innerHTML="Присылаем только информацию, связанную с твоими сессиями",e.className="note",d.tg=!0,v.tg=""),""==t.value&&(t.className="input",e.innerHTML="Присылаем только информацию, связанную с твоими сессиями",e.className="note",d.tg=!0,v.tg=""),""!=t.value&&(t.value.length>5&&(t.className="input input_valid",e.innerHTML="Присылаем только информацию, связанную с твоими сессиями",e.className="note",d.tg=!0,v.tg=t.value),t.value.length<6&&(t.className="input input_error",e.innerHTML="Ник должен быть не короче 5 символов",e.className="note note_error",d.tg=!1,v.tg=t.value))}function o(){let e=JSON.stringify(v);fetch("http://158.160.4.55:49161/v1/auth/register/",{method:"POST",body:e,headers:{"Content-type":"application/json; charset=UTF-8",accept:"application/json","Access-Control-Allow-Origin":"http://127.0.0.1:5500/","Access-Control-Allow-Methods":"POST","Access-Control-Allow-Headers":"Content-type"}}).then((e=>e.json())).then((e=>console.log(e))).catch((()=>{console.log("error")}))}function u(){let e=!0,t=m.button;for(let t in d)e&=d[t];e&&(t.className="button button_registration-page",t.addEventListener("click",o)),e||(t.className="button button_registration-page button_block",t.removeEventListener("click",o))}e.d({},{cr:()=>m,AV:()=>v,qd:()=>d});let c=document.getElementById("submit"),p=document.getElementById("phone"),m={phone:p,pw:"",pwConfirm:"",userName:"",birth:"",email:"",tg:"",button:c},d={password:!1,userName:!1,birth:!1,email:!0,tg:!0},v={phone:"",password:"",name:"",birth:"",tg:"",email:""};document.addEventListener(onload,([].forEach.call(document.querySelectorAll("#phone"),(function(e){var t;function n(e){e.keyCode&&(t=e.keyCode),this.selectionStart<3&&e.preventDefault();var n="+7 (___) ___ __ __",a=0,l=n.replace(/\D/g,""),s=this.value.replace(/\D/g,""),r=n.replace(/[_\d]/g,(function(e){return a<s.length?s.charAt(a++)||l.charAt(a):e}));-1!=(a=r.indexOf("_"))&&(a<5&&(a=3),r=r.slice(0,a));var i=n.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");(!(i=new RegExp("^"+i+"$")).test(this.value)||this.value.length<5||t>47&&t<58)&&(this.value=r),"blur"==e.type&&this.value.length<5&&(this.value="")}e.addEventListener("input",n,!1),e.addEventListener("focus",n,!1),e.addEventListener("blur",n,!1),e.addEventListener("keydown",n,!1)})),p.addEventListener("change",(function(){let e=m.phone,n=document.querySelector("#phone-note"),a=m.button,l="",s={1:"Не хватает одной цифры",2:"Не хватает две цифры",3:"Не хватает три цифры",4:"Не хватает четыре цифры",5:"Не хватает пять цифр",6:"Не хватает шесть цифр",7:"Не хватает семь цифр",8:"Не хватает восемь цифр",9:"Не хватает девять цифр"};if(e.value.length>3&&e.value.length<18){let l=11-e.value.match(/\d/g).join("").length;e.className="input input_enter-page input_error",n.className="note note_error",n.innerHTML=s[l],a.removeEventListener("click",t)}18==e.value.length&&(a.addEventListener("click",t),l=e.value.match(/[\+\d]/g).join("")),v.phone=l})),void p.addEventListener("input",(function(){let e=m.phone,t=document.querySelector("#phone-note"),n=m.button;18==e.value.length&&(e.className="input input_enter-page input_valid",t.className="note",t.innerHTML="",n.className="button button_enter-page"),e.value.length<18&&(e.className="input input_enter-page",t.className="note",t.innerHTML="",n.className="button button_enter-page button_block")}))));let h=document.querySelector("main");function g(){let e=document.getElementById("password"),t=document.getElementById("password-confirm"),o=document.getElementById("name"),c=document.getElementById("birth"),p=document.getElementById("email"),d=document.getElementById("tg"),v=document.querySelectorAll(".input");m.pw=e,m.pwConfirm=t,m.userName=o,m.birth=c,m.email=p,m.tg=d,m.button=document.querySelector("#submit"),e.addEventListener("change",n),t.addEventListener("change",n),o.addEventListener("input",a),c.addEventListener("input",l),p.addEventListener("input",r),p.addEventListener("change",s),d.addEventListener("input",i),v.forEach((e=>e.addEventListener("change",u)))}new MutationObserver((e=>{for(let t of e)for(let e of t.addedNodes)e instanceof HTMLElement&&e.matches("form")&&g()})).observe(h,{childList:!0,subtree:!0})})();