(()=>{let e=document.querySelector("#phone"),t=document.querySelector("#phone-note"),n=document.querySelector("#password"),a=(document.querySelector("#password-note"),document.querySelector("#submit")),o={},l="",s="",r={phone:!1,password:!1};function u(){let e=!0;for(let t in r)e&=r[t];e?(a.className="button button_enter-page",a.addEventListener("click",c)):(a.className="button button_enter-page button_block",a.removeEventListener("click",c)),console.log(r)}function c(){o.phone=e.value.match(/[\d\+]/),o.phone=e.value;let t=JSON.stringify(o);fetch("https://cors-anywhere.herokuapp.com/http://158.160.4.55:49161/v1/auth/login/",{method:"POST",body:t,headers:{"Content-type":"application/json; charset=UTF-8",accept:"application/json"}}).then((e=>{if(e.status>=200&&e.status<300)return s=e.status,e;{let t=new Error(e.statusText);throw t.response=e,t}})).then((e=>e.json())).then((e=>{l=JSON.parse(e),console.log("ответ сервера ",l)})).catch((e=>{s=e.status,l=e.response,console.log("Error: ",e.message);let t=JSON.parse(l);for(let e in t)console.log("key: ",e," value: ",t[e])}))}document.addEventListener(onload,([].forEach.call(document.querySelectorAll("#phone"),(function(e){var t;function n(e){e.keyCode&&(t=e.keyCode),this.selectionStart<3&&e.preventDefault();var n="+7 (___) ___ __ __",a=0,o=n.replace(/\D/g,""),l=this.value.replace(/\D/g,""),s=n.replace(/[_\d]/g,(function(e){return a<l.length?l.charAt(a++)||o.charAt(a):e}));-1!=(a=s.indexOf("_"))&&(a<5&&(a=3),s=s.slice(0,a));var r=n.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");(!(r=new RegExp("^"+r+"$")).test(this.value)||this.value.length<5||t>47&&t<58)&&(this.value=s),"blur"==e.type&&this.value.length<5&&(this.value="")}e.addEventListener("input",n,!1),e.addEventListener("focus",n,!1),e.addEventListener("blur",n,!1),e.addEventListener("keydown",n,!1)})),e.addEventListener("input",(function(){18==e.value.length&&(e.className="input input_enter-page input_valid",t.className="note",t.innerHTML="",r.phone=!0),e.value.length<18&&(e.className="input input_enter-page",t.className="note",t.innerHTML="",r.phone=!1),u()})),e.addEventListener("change",(function(){let n="",a={1:"Не хватает одной цифры",2:"Не хватает две цифры",3:"Не хватает три цифры",4:"Не хватает четыре цифры",5:"Не хватает пять цифр",6:"Не хватает шесть цифр",7:"Не хватает семь цифр",8:"Не хватает восемь цифр",9:"Не хватает девять цифр"};if(e.value.length>3&&e.value.length<18){let n=11-e.value.match(/\d/g).join("").length;e.className="input input_enter-page input_error",t.className="note note_error",t.innerHTML=a[n]}18==e.value.length&&(n=e.value.match(/[\+\d]/g).join("")),o.phone=n,console.log(o.phone)})),void n.addEventListener("input",(function(){n.value.length>0?(n.className="input input_enter-page input_valid",r.password=!0):(n.className="input input_enter-page",r.password=!1),u()}))))})();